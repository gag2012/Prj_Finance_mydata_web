<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>전염병 데이터(PandemicBoard)</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
        <link href="../static/springboot/css/styles.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>
        <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/css/bootstrap-select.min.css" />
	    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <link href="../static/springboot/css/styles2.css" rel="stylesheet" />
    </head>
    <body class="sb-nav-fixed">
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="index.html"><i class="fab fa-pied-piper-square"></i> PandemicBoard</a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
            </form>
            <!-- Navbar-->
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">바로알기</div>
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                실시간 상황판
                            </a>
                            <a class="nav-link" href="insurance.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                보험료 산출
                            </a>
                            <div class="sb-sidenav-menu-heading">분석차트</div>
                            <a class="nav-link" href="economy.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-file-invoice"></i></div>
                                경제피해
                            </a>
                            <a class="nav-link" href="foot-traffic.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-running"></i></div>
                                유동인구
                            </a>
                            <a class="nav-link" href="virInform.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-virus"></i></div>
                                바이러스 정보
                            </a>
                            <div class="sb-sidenav-menu-heading">정보</div>
                            <a class="nav-link" href="notice.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-bullhorn"></i></div>
                                공지사항
                            </a>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer">
                        <div class="small">COPYRIGHT © 보험의 정석 ALL RIGHTS RESERVED.</div>
                        금융 데이터 경진대회
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h2 class="mt-2">실시간 상황판</h2>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active">대시보드</li>
                        </ol>
                        <div class="row">
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-secondary text-white mb-4">
                                    <div class="card-body">소상공인 및 기업 지원 정책</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="http://ncov.mohw.go.kr/supportPolicyBoardList.do?brdId=5&brdGubun=53">바로 가기</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-secondary text-white mb-4">
                                    <div class="card-body">국내 발생 현황</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="http://ncov.mohw.go.kr/bdBoardList_Real.do?brdId=1&brdGubun=11&ncvContSeq=&contSeq=&board_id=&gubun=">바로 가기</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-secondary text-white mb-4">
                                    <div class="card-body">지역별 거리두기 현황</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="http://ncov.mohw.go.kr/regSocdisBoardView.do?brdId=6&brdGubun=68&ncvContSeq=495">바로 가기</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-secondary text-white mb-4">
                                    <div class="card-body">백신 접종 현황</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="https://ncv.kdca.go.kr/">바로 가기</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        코로나 일별 확진자 차트
                                    </div>
                                    <div class="card-body"><canvas id="myAreaChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        코로나 월별 확진자 차트
                                    </div>
                                    <div class="card-body"><canvas id="myBarChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-area me-1"></i>
                                자치구별 일일 확진자
                            </div>
                            <div class="card-body">
                                <div class="card-body"><canvas id="testChart" width="100%" height="40"></canvas></div>
                            </div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-area me-1"></i>
                                자치구별 누적 확진자
                            </div>
                            <div class="card-body">
                                <div class="card-body"><canvas id="testChart2" width="100%" height="40"></canvas></div>
                            </div>
                        </div>
                    </div>
                </main>
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">본 사이트에서 제공하는 내용의 인용과 사용에 대한 책임은 전적으로 인용자 및 사용자에게 있음을 알립니다.</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script>
            var xmlHttp = new XMLHttpRequest();			// XMLHttpRequest 객체를 생성함.
            xmlHttp.onreadystatechange = function() {	// onreadystatechange 이벤트 핸들러를 작성함.
                // 서버상에 문서가 존재하고 요청한 데이터의 처리가 완료되어 응답할 준비가 완료되었을 때
                if(this.status == 200 && this.readyState == this.DONE) {
                    nodeValFunc(this);
                }
            };
            xmlHttp.open("GET", "//openapi.seoul.go.kr:8088/sample/xml/TbCorona19CountStatusJCG/1/5/", false);
            xmlHttp.send();
    
            function nodeValFunc(xml) {   // xml데이터 넘김
                xmlDoc = xml.responseXML;   
    
                var JONGNO, JONGNOADD;
                var JUNGGU, JUNGGUADD;
                var YONGSAN, YONGSANADD;
                var SEONGDONG, SEONGDONGADD;
                var GWANGJIN, GWANGJINADD;
                var DDM, DDMADD;
                var JUNGNANG, JUNGNANGADD;
                var SEONGBUK, SEONGBUKADD;
                var GANGBUK, GANGBUKADD;
                var DOBONG, DOBONGADD;
                var NOWON, NOWONADD;
                var EP, EPADD;
                var SDM, SDMADD;
                var MAPO, MAPOADD;
                var YANGCHEON, YANGCHEONADD;
                var GANGSEO, GANGSEOADD;
                var GURO, GUROADD;
                var GEUMCHEON, GEUMCHEONADD;
                var YDP, YDPADD;
                var DONGJAK, DONGJAKADD;
                var GWANAK, GWANAKADD;
                var SEOCHO, SEOCHOADD;
                var GANGNAM, GANGNAMADD;
                var SONGPA, SONGPAADD;
                var GANGDONG, GANGDONGADD;
                var ETC, ETCADD;
                var date;

                date = xmlDoc.getElementsByTagName("JCG_DT")[0].childNodes[0].nodeValue;
                JONGNO = xmlDoc.getElementsByTagName("JONGNO")[0].childNodes[0].nodeValue;
                JONGNOADD = xmlDoc.getElementsByTagName("JONGNOADD")[0].childNodes[0].nodeValue;
                JUNGGU = xmlDoc.getElementsByTagName("JUNGGU")[0].childNodes[0].nodeValue;
                JUNGGUADD = xmlDoc.getElementsByTagName("JUNGGUADD")[0].childNodes[0].nodeValue;
                YONGSAN = xmlDoc.getElementsByTagName("YONGSAN")[0].childNodes[0].nodeValue;
                YONGSANADD = xmlDoc.getElementsByTagName("YONGSANADD")[0].childNodes[0].nodeValue;
    
                SEONGDONG = xmlDoc.getElementsByTagName("SEONGDONG")[0].childNodes[0].nodeValue;
                SEONGDONGADD = xmlDoc.getElementsByTagName("SEONGDONGADD")[0].childNodes[0].nodeValue;
                GWANGJIN = xmlDoc.getElementsByTagName("GWANGJIN")[0].childNodes[0].nodeValue;
                GWANGJINADD = xmlDoc.getElementsByTagName("GWANGJINADD")[0].childNodes[0].nodeValue;
                DDM = xmlDoc.getElementsByTagName("DDM")[0].childNodes[0].nodeValue;
                DDMADD = xmlDoc.getElementsByTagName("DDMADD")[0].childNodes[0].nodeValue;
                JUNGNANG = xmlDoc.getElementsByTagName("JUNGNANG")[0].childNodes[0].nodeValue;
                JUNGNANGADD = xmlDoc.getElementsByTagName("JUNGNANGADD")[0].childNodes[0].nodeValue;
                SEONGBUK = xmlDoc.getElementsByTagName("SEONGBUK")[0].childNodes[0].nodeValue;
                SEONGBUKADD = xmlDoc.getElementsByTagName("SEONGBUKADD")[0].childNodes[0].nodeValue;
    
                GANGBUK = xmlDoc.getElementsByTagName("GANGBUK")[0].childNodes[0].nodeValue;
                GANGBUKADD = xmlDoc.getElementsByTagName("GANGBUKADD")[0].childNodes[0].nodeValue;
                DOBONG = xmlDoc.getElementsByTagName("DOBONG")[0].childNodes[0].nodeValue;
                DOBONGADD = xmlDoc.getElementsByTagName("DOBONGADD")[0].childNodes[0].nodeValue;
                NOWON = xmlDoc.getElementsByTagName("NOWON")[0].childNodes[0].nodeValue;
                NOWONADD = xmlDoc.getElementsByTagName("NOWONADD")[0].childNodes[0].nodeValue;
                EP = xmlDoc.getElementsByTagName("EP")[0].childNodes[0].nodeValue;
                EPADD = xmlDoc.getElementsByTagName("EPADD")[0].childNodes[0].nodeValue;
    
                SDM = xmlDoc.getElementsByTagName("SDM")[0].childNodes[0].nodeValue;
                SDMADD = xmlDoc.getElementsByTagName("SDMADD")[0].childNodes[0].nodeValue;
                MAPO = xmlDoc.getElementsByTagName("MAPO")[0].childNodes[0].nodeValue;
                MAPOADD = xmlDoc.getElementsByTagName("MAPOADD")[0].childNodes[0].nodeValue;
                YANGCHEON = xmlDoc.getElementsByTagName("YANGCHEON")[0].childNodes[0].nodeValue;
                YANGCHEONADD = xmlDoc.getElementsByTagName("YANGCHEONADD")[0].childNodes[0].nodeValue;
                GANGSEO = xmlDoc.getElementsByTagName("GANGSEO")[0].childNodes[0].nodeValue;
                GANGSEOADD = xmlDoc.getElementsByTagName("GANGSEOADD")[0].childNodes[0].nodeValue;
    
                GURO = xmlDoc.getElementsByTagName("GURO")[0].childNodes[0].nodeValue;
                GUROADD = xmlDoc.getElementsByTagName("GUROADD")[0].childNodes[0].nodeValue;
                GEUMCHEON = xmlDoc.getElementsByTagName("GEUMCHEON")[0].childNodes[0].nodeValue;
                GEUMCHEONADD = xmlDoc.getElementsByTagName("GEUMCHEONADD")[0].childNodes[0].nodeValue;
                YDP = xmlDoc.getElementsByTagName("YDP")[0].childNodes[0].nodeValue;
                YDPADD = xmlDoc.getElementsByTagName("YDPADD")[0].childNodes[0].nodeValue;
                DONGJAK = xmlDoc.getElementsByTagName("DONGJAK")[0].childNodes[0].nodeValue;
                DONGJAKADD = xmlDoc.getElementsByTagName("DONGJAKADD")[0].childNodes[0].nodeValue;
    
                GWANAK = xmlDoc.getElementsByTagName("GWANAK")[0].childNodes[0].nodeValue;
                GWANAKADD = xmlDoc.getElementsByTagName("GWANAKADD")[0].childNodes[0].nodeValue;
                SEOCHO = xmlDoc.getElementsByTagName("SEOCHO")[0].childNodes[0].nodeValue;
                SEOCHOADD = xmlDoc.getElementsByTagName("SEOCHOADD")[0].childNodes[0].nodeValue;
                GANGNAM = xmlDoc.getElementsByTagName("GANGNAM")[0].childNodes[0].nodeValue;
                GANGNAMADD = xmlDoc.getElementsByTagName("GANGNAMADD")[0].childNodes[0].nodeValue;
                SONGPA = xmlDoc.getElementsByTagName("SONGPA")[0].childNodes[0].nodeValue;
                SONGPAADD = xmlDoc.getElementsByTagName("SONGPAADD")[0].childNodes[0].nodeValue;
    
                GANGDONG = xmlDoc.getElementsByTagName("GANGDONG")[0].childNodes[0].nodeValue;
                GANGDONGADD = xmlDoc.getElementsByTagName("GANGDONGADD")[0].childNodes[0].nodeValue;
                ETC = xmlDoc.getElementsByTagName("ETC")[0].childNodes[0].nodeValue;
                ETCADD = xmlDoc.getElementsByTagName("ETCADD")[0].childNodes[0].nodeValue;	
    
                var ctx = document.getElementById("testChart");
                var testChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [
                            "종로구", "중구", "용산구", "성동구"
                            , "광진구", "중랑구", "성북구", "강북구"
                            , "도봉구", "노원구", "은평구", "동대문구", "서대문구"
                            , "마포구", "양천구", "강서구", "관악구"
                            , "구로구", "금천구", "영등포구", "동작구"
                            , "서초구", "강남구", "송파구", "강동구", "기타"
                        ],
                        datasets: [{
                        label: "자치구별 일일 확진자 (" + date + " 업데이트)",
                        backgroundColor: "rgba(222,84,57,0.9)",
                        borderColor: "rgba(222,84,57,0.9)",
                        data: [
                            JONGNOADD, JUNGGUADD, YONGSANADD, SEONGDONGADD
                            , GWANGJINADD, JUNGNANGADD, SEONGBUKADD, GANGBUKADD
                            , DOBONGADD, NOWONADD, EPADD, DDMADD, SDMADD
                            , MAPOADD, YANGCHEONADD, GANGSEOADD, GWANAKADD
                            , GUROADD, GEUMCHEONADD, YDPADD, DONGJAKADD
                            , SEOCHOADD, GANGNAMADD, SONGPAADD, GANGDONGADD, ETCADD
                        ],
                        }],
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                min: 0
                                },
                                gridLines: {
                                display: true
                                }
                            }],
                        },
                        events: false,
                        tooltips: {
                            enabled: false
                        },
                        hover: {
                            animationDuration: 0
                        },
                        animation: {
                            duration: 1,
                            onComplete: function () {
                                var chartInstance = this.chart,
                                ctx = chartInstance.ctx;
                                ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
    
                                this.data.datasets.forEach(function (dataset, i) {
                                    var meta = chartInstance.controller.getDatasetMeta(i);
                                    meta.data.forEach(function (bar, index) {
                                        var data = dataset.data[index];                            
                                        ctx.fillText(data, bar._model.x, bar._model.y - 5);
                                    });
                                });
                            }
                        }
                    }
                });

                var ctx = document.getElementById("testChart2");
                var testChart2 = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [
                            "종로구", "중구", "용산구", "성동구"
                            , "광진구", "중랑구", "성북구", "강북구"
                            , "도봉구", "노원구", "은평구", "동대문구", "서대문구"
                            , "마포구", "양천구", "강서구", "관악구"
                            , "구로구", "금천구", "영등포구", "동작구"
                            , "서초구", "강남구", "송파구", "강동구", "기타"
                        ],
                        datasets: [{
                        label: "자치구별 누적 확진자 (" + date + " 업데이트)",
                        backgroundColor: "rgba(222,84,57,0.9)",
                        borderColor: "rgba(222,84,57,0.9)",
                        data: [
                            JONGNO, JUNGGU, YONGSAN, SEONGDONG
                            , GWANGJIN, JUNGNANG, SEONGBUK, GANGBUK
                            , DOBONG, NOWON, EP, DDM, SDM
                            , MAPO, YANGCHEON, GANGSEO, GWANAK
                            , GURO, GEUMCHEON, YDP, DONGJAK
                            , SEOCHO, GANGNAM, SONGPA, GANGDONG, ETC
                        ],
                        }],
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                min: 0
                                },
                                gridLines: {
                                display: true
                                }
                            }],
                        },
                        events: false,
                        tooltips: {
                            enabled: false
                        },
                        hover: {
                            animationDuration: 0
                        },
                        animation: {
                            duration: 1,
                            onComplete: function () {
                                var chartInstance = this.chart,
                                ctx = chartInstance.ctx;
                                ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
    
                                this.data.datasets.forEach(function (dataset, i) {
                                    var meta = chartInstance.controller.getDatasetMeta(i);
                                    meta.data.forEach(function (bar, index) {
                                        var data = dataset.data[index];                            
                                        ctx.fillText(data, bar._model.x, bar._model.y - 5);
                                    });
                                });
                            }
                        }
                    }
                });
            };
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="../static/springboot/js/scripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="../static/springboot/assets/demo/chart-area-demo.js"></script>
        <script src="../static/springboot/assets/demo/chart-bar-demo.js"></script>
        <script src="../static/springboot/assets/demo/chart-virus.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
        <script src="../static/springboot/js/datatables-simple-demo.js"></script>
    </body>
</html>
